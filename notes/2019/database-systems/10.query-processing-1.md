# Query Processing

## Query plan

연산자는 트리로 배열된다.

데이터는 리프에서 루트로 흐르게 된다.

루트 노드로부터의 아웃풋은 쿼리의 결과이다.

## Processing Model

DBMS 의 프로세싱 모델은 시스템이 어떻게 쿼리 플랜을 실행시키는지에 대한 정의이다.
* 각각의 워크로드마다 서로 다른 장단점을 가진다.

세 개의 접근법이 있다.
* Iterator Model
* Materialization Model
* Vectorized / Batch Model

## Iterator Model

각각의 쿼리 플랜의 연산자가 다음 함수를 표현한다.
* 각 호출에서 연산자는 더이상 튜플이 없으면 단일 튜플 또는 null 마커를 반환한다.
* 연산자는 자식에 대한 next 를 호출하여 튜플을 검색한 다음 처리하도록 루프를 구현한다.

Top-down plan processing.

Volcano or Pipeline Model 이라고도 불린다.

![](./res/10-1.png)

대부분의 DBMS 가 튜플 파이프라이닝을 지원하기 위해 사용한다.

몇 연산자들은 모든 튜플을 방출(emit)하기 위해 그 기간동안 block 한다.
* Joins, Subqueries, Order By

Output Control 은 이런 모델을 사용하면 처리가 쉬워진다.
* Limit, Offset


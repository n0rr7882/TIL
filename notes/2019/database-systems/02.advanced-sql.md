# Advanced SQL

## Relational Languages

사용자는 어떻게 실행하는 방법을 원하는 것이 아닌 특정한 결과값을 원한다.

DBMS 는 쿼리를 책임지고 효율적으로 평가할 수 있다.

* Query optimizer: Operation 들을 재배열시키고 Query plan 을 생성한다.

SQL 은 기술적으로 하나가 아닌 여러개의 언어 모음이다.

* Data Manipulation Language (DML)
* Data Difination Language (DDL)
* Data Control Language (DCL)

그리고 다음 내용도 포함된다.

* View difination
* Integrity & Referential Constraints
* Transactions

**SQL 은 `sets`(no duplicates) 이 아닌 `bags`(duplicates) 에 기초한다.**

## History of SQL

* SQL 의 원조격인 `SEQUEL` 은 IBM 의 System R 프로토타입에서 처음 등장하였다.
    * **S**tructured **E**nglish **Q**uery **L**anguage
    * Oracle 이 1970년에 채택하였다.
* IBM 이 1983년 `DB2` 를 공개하였다.
* 1986년 ANSI 표준이 지정되고, 1987년 ISO 표준이 지정되었다.
    * **S**tructured **Q**uery **L**anguage

현재의 표준은 `SQL:2016`이다.
* `SQL:2016`: JSON, Polymorphic Table 지원
* `SQL:2011`: Temporal DB, Pipelined DML 지원
* `SQL:2008`: TRUNCATE, Fancy ORDER 지원
* `SQL:2003`: XML, Windows, Sequences, Auto-generated ID 지원
* `SQL:1999`: Regex, Triggers, OO

대부분의 DBMS 들은 최소한 `SQL-92` 를 지원한다.

## Aggregates

Tuple 의 집합에서 Single value 를 반환하는 함수들이다.
* `AVG(col)`: col 값의 평균을 반환한다.
* `MIN(col)`: col 값의 최소값을 반환한다.
* `MAX(col)`: col 값의 최대값을 반환한다.
* `SUM(col)`: col 값의 총합을 반환한다.
* `COUNT(col)`: col 값의 개수를 반환한다.

Aggregate 함수들은 SELECT 의 output 리스트에서만 사용할 수 있다.
